# Maintainer: Te Neved <email@cim.hu>
pkgname=grub-theme-archi3
pkgver=1.0.0
pkgrel=1
pkgdesc="Minimalista Arch Linux GRUB téma i3wm stílusban"
arch=('any')
url="https://github.com/Arch-i3/grub-theme-archi3" # Cseréld le a valós URL-re
license=('GPL')
depends=('grub')
optdepends=('grub-customizer: GUI a GRUB beállításához')
install="${pkgname}.install"
options=('!strip') # Témáknál felesleges a strip, és néha gondot okoz képeknél

# Mivel a fájlok a git repóban (helyben) vannak, nem töltünk le semmit
source=()
sha256sums=()

package() {
    # Üzenet kiírása építés közben
    msg2 "Téma fájlok másolása..."

    # A $startdir a PKGBUILD mappája (a git repó gyökere)
    cd "$startdir"

    # Célkönyvtár létrehozása a szabványos helyen
    install -d "$pkgdir/usr/share/grub/themes/archi3"

    # A téma mappájának (archi3) tartalmát átmásoljuk a célhelyre
    # Feltételezzük, hogy a mappában van: theme.txt, *.png, *.pf2
    cp -r archi3/* "$pkgdir/usr/share/grub/themes/archi3/"

    # Jogosultságok beállítása:
    # Könyvtárak: 755 (rwxr-xr-x), Fájlok: 644 (rw-r--r--)
    find "$pkgdir/usr/share/grub/themes/archi3" -type d -exec chmod 755 {} +
    find "$pkgdir/usr/share/grub/themes/archi3" -type f -exec chmod 644 {} +
    
    msg2 "Kész."
}
